#!/usr/bin/env zsh
# George Ornbo (shapeshed) http://shapeshed.com
# License - http://unlicense.org
#
# Fixes a corrupt .zsh_history file
# https://shapeshed.com/zsh-corrupt-history-file/

local DIR=${ZDOTDIR:-$HOME}

mv $DIR/.zsh_history $DIR/.zsh_history_bad
strings $DIR/.zsh_history_bad > $DIR/.zsh_history
fc -R $DIR/.zsh_history
rm $DIR/.zsh_history_bad
